defaults:
  db_url: postgresql://localhost:5432/telemetry_db
  batch_size: 5000
  on_conflict: append

sources:
  - name: verstappen_telemetry_miami_2024
    type: csv
    path: data/verstappen_telemetry_miami_2024.csv
    target_table: stg_telemetry
    pk: [record_id]

# Column types:
    schema:
      record_id: int
      Date: datetime
      RPM: int
      Speed: int
      nGear: int
      Throttle: int
      Brake: bool
      DRS: int
      Source: str
      Time: str
      SessionTime: str

  # Validation rules using pandas syntax
    rules:
      - rule: "rpm >= 0"
        message: "RPM must be non-negative"
      - rule: "rpm <= 20000"
        message: "RPM exceeds F1 maximum (20,000)"
      - rule: "speed >= 0"
        message: "Speed must be non-negative"
      - rule: "speed <= 400"
        message: "Speed exceeds F1 maximum (400 km/h)"
      - rule: "throttle >= 0"
        message: "Throttle must be non-negative"
      - rule: "throttle <= 100"
        message: "Throttle must be 0-100%"
      - rule: "n_gear >= 0"
        message: "Gear must be non-negative"
      - rule: "n_gear <= 8"
        message: "F1 cars have max 8 gears"
